package cn.egame.common.operation.factory;

import cn.egame.common.cache.ICacheClient;
import cn.egame.common.cache.SCacheClient;
import cn.egame.common.operation.ICheckHealth;
import cn.egame.common.operation.ResultHealth;

public class CheckCacheHealth implements ICheckHealth {
	String cacheName;

	public CheckCacheHealth(String cacheName) {
		this.cacheName = cacheName;
	}

	@Override
	public ResultHealth checkHealth() {
		ResultHealth result = new ResultHealth();
		result.setCode(1);
		result.setName("cache_" + cacheName);

		ICacheClient cacheClient = SCacheClient.getInstance(cacheName);
		cacheClient.set("test", "test");
		String value = cacheClient.getString("test");
		if (!"test".equals(value)) {
			result.setCode(0);
		}
		return result;
	}

	@Override
	public String getName() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public Object getResult() {
		// TODO Auto-generated method stub
		return null;
	}

}
