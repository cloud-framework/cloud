package cn.egame.common.operation.factory;

import cn.egame.common.data.BaseDao;
import cn.egame.common.exception.ExceptionCommonBase;
import cn.egame.common.operation.ICheckHealth;
import cn.egame.common.operation.ResultHealth;

public class CheckMysqlHealth extends BaseDao implements ICheckHealth {

	String dbName;

	public CheckMysqlHealth(String dbName) throws ExceptionCommonBase {
		super(dbName);
		this.dbName = dbName;
	}

	@Override
	public ResultHealth checkHealth() {
		ResultHealth result = new ResultHealth();
		result.setCode(1);
		result.setName("mysql_"+dbName);
		try {
			result.setCode(this.getInt("select 1 from dual"));
		} catch (ExceptionCommonBase e) {
			result.setCode(0);
		}

		return result;
	}

	@Override
	public String getName() {
		return null;
	}

	@Override
	public Object getResult() {
		return null;
	}

}
